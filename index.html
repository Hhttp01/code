<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ProCode IDE - Full Version</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #0d1117; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #30363d; border-radius: 10px; }
        .ltr { direction: ltr; text-align: left; }
        body { margin: 0; background-color: #0d1117; overscroll-behavior: none; }
        
        @media (max-width: 768px) {
            .sidebar-mobile {
                position: fixed; right: 0; top: 0; bottom: 0; z-index: 50;
                transform: translateX(100%); transition: transform 0.3s ease;
            }
            .sidebar-open { transform: translateX(0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const STORAGE_KEY = 'pro_code_complete_v3';

        const Icon = ({ name, size = 18, className = "" }) => {
            const iconRef = useRef(null);
            useEffect(() => {
                if (iconRef.current && window.lucide) {
                    const icon = lucide[name] || lucide.File;
                    iconRef.current.innerHTML = lucide.createIcons({
                        icons: { [name]: icon }
                    });
                }
            }, [name]);
            return <i ref={iconRef} className={`inline-flex items-center justify-center ${className}`} style={{ width: size, height: size }}></i>;
        };

        const App = () => {
            const [files, setFiles] = useState(() => {
                const saved = localStorage.getItem(STORAGE_KEY);
                return saved ? JSON.parse(saved) : {
                    'index.js': '// Welcome to ProCode\nconsole.log("Hello!");',
                    'style.css': 'body { background: black; }',
                    'README.md': '# Project\nSaved in local storage.'
                };
            });

            const [activeFile, setActiveFile] = useState(Object.keys(files)[0] || '');
            const [newFileName, setNewFileName] = useState('');
            const [isSidebarOpen, setSidebarOpen] = useState(window.innerWidth > 768);
            const [isSaving, setIsSaving] = useState(false);
            const [isExporting, setIsExporting] = useState(false);
            const jszipRef = useRef(null);

            // שמירה אוטומטית
            useEffect(() => {
                setIsSaving(
