<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud Editor - Stable Version</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

    <style>
        body { margin: 0; background-color: #0d1117; color: #c9d1d9; font-family: system-ui, -apple-system, sans-serif; }
        .ltr { direction: ltr; text-align: left; }
        textarea { font-family: 'Consolas', 'Monaco', monospace; }
        .sidebar-item:hover { background-color: #21262d; }
        .active-file { background-color: #21262d; color: white; border-right: 2px solid #58a6ff; }
        /* מניעת הבהוב בטעינה */
        [react-cloak] { display: none; }
    </style>
</head>
<body>
    <div id="root">
        <div style="padding: 20px; text-align: center;">טוען את המערכת... אם ההודעה לא נעלמת, יש לבדוק חיבור לאינטרנט.</div>
    </div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            // טעינה מ-LocalStorage
            const [files, setFiles] = useState(() => {
                try {
                    const saved = localStorage.getItem('my_dev_files');
                    return saved ? JSON.parse(saved) : {
                        'index.js': '// התחל לכתוב כאן\nconsole.log("Hello!");',
                        'README.md': '# פרויקט חדש'
                    };
                } catch (e) {
                    return { 'index.js': 'console.log("Hello!");' };
                }
            });

            const [activeFile, setActiveFile] = useState(Object.keys(files)[0]);
            const [newFileName, setNewFileName] = useState('');

            // שמירה אוטומטית בכל שינוי
            useEffect(() => {
                localStorage.setItem('my_dev_files', JSON.stringify(files));
            }, [files]);

            const addFile = () => {
                if (!newFileName || files[newFileName]) return;
                const newFiles = { ...files, [newFileName]: '' };
                setFiles(newFiles);
                setActiveFile(newFileName);
                setNewFileName('');
